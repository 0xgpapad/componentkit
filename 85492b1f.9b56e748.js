(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{179:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return c})),n.d(t,"metadata",(function(){return i})),n.d(t,"rightToc",(function(){return l})),n.d(t,"default",(function(){return s}));var o=n(2),a=n(11),r=(n(0),n(205)),c={title:"Component Context"},i={id:"component-context",title:"Component Context",description:"CKComponentContext",source:"@site/docs/component-context.md",permalink:"/docs/component-context",sidebar:"docs",previous:{title:"Advanced Views",permalink:"/docs/advanced-views"}},l=[{value:"<code>CKComponentContext</code>",id:"ckcomponentcontext",children:[]},{value:"<code>CKComponentMutableContext</code>",id:"ckcomponentmutablecontext",children:[]}],p={rightToc:l};function s(e){var t=e.components,n=Object(a.a)(e,["components"]);return Object(r.b)("wrapper",Object(o.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"ckcomponentcontext"},Object(r.b)("inlineCode",{parentName:"h2"},"CKComponentContext")),Object(r.b)("p",null,"Provides a way to pass data through the component tree without having to pass props down manually at every level. Items are keyed by class."),Object(r.b)("p",null,"In ComponentKit, data is passed top-down (parent to child) via props, but this can be cumbersome for certain types of props (e.g. locale preference, UI theme) that are required by many components within an application. Component context provides a way to implicitly share values like these between components without having to explicitly pass a prop through every level of the tree."),Object(r.b)("div",{class:"note-important"},Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"CKComponentContext")," values are ",Object(r.b)("strong",{parentName:"p"},"NOT")," expected to change between component generations. This is an optimization to allow better component reuse in ",Object(r.b)("inlineCode",{parentName:"p"},"CKRenderComponent"),".\nIf your context values need to be changed between component generations, take a look at ",Object(r.b)("inlineCode",{parentName:"p"},"CKComponentMutableContext"),".")),Object(r.b)("div",{class:"note"},Object(r.b)("p",null,"Context should be used sparingly. Prefer explicitly passing parameters instead.")),Object(r.b)("p",null,"Example usage:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-objectivec"})," {\n  // Declaring a context:\n  CKComponentContext<CKFoo> c(foo);\n\n  // Reading a context: (any components created while c is in scope will be able to read its value by calling).\n  auto const foo = CKComponentContext<CKFoo>::get();\n }\n")),Object(r.b)("p",null," You may nest contexts with the same class, in which case the innermost context defines the value when fetched:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-objectivec"})," {\n   CKComponentContext<CKFoo> c1(foo1);\n   {\n     CKComponentContext<CKFoo> c2(foo2);\n     // CKComponentContext<CKFoo>::get() will return foo2 here\n   }\n   // CKComponentContext<CKFoo>::get() will return foo1 here\n }\n")),Object(r.b)("h2",{id:"ckcomponentmutablecontext"},Object(r.b)("inlineCode",{parentName:"h2"},"CKComponentMutableContext")),Object(r.b)("p",null,"Similar to ",Object(r.b)("inlineCode",{parentName:"p"},"CKComponentContext"),", but allows context values ",Object(r.b)("strong",{parentName:"p"},"changes")," between generations."),Object(r.b)("div",{class:"note"},Object(r.b)("p",null,"Values must be derived from a component's props and/or state. Placing values in a mutable context derived from other sources (such as, but not limited to ",Object(r.b)("inlineCode",{parentName:"p"},"arc4random"),", ",Object(r.b)("inlineCode",{parentName:"p"},"time")," etc) will cause reuse bugs.")),Object(r.b)("p",null,"Example usage:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-objectivec"})," {\n   // Declaring a context:\n   CKComponentMutableContext<CKFoo> c(foo);\n\n   // Reading a context: (any components created while c is in scope will be able to read its value by calling).\n   auto const foo = CKComponentMutableContext<CKFoo>::get();\n }\n")),Object(r.b)("p",null," You may nest contexts with the same class, in which case the innermost context defines the value when fetched:"),Object(r.b)("pre",null,Object(r.b)("code",Object(o.a)({parentName:"pre"},{className:"language-objectivec"})," {\n   CKComponentMutableContext<CKFoo> c1(foo1);\n   {\n     CKComponentMutableContext<CKFoo> c2(foo2);\n     // CKComponentMutableContext<CKFoo>::get() will return foo2 here\n   }\n   // CKComponentMutableContext<CKFoo>::get() will return foo1 here\n }\n")),Object(r.b)("div",{class:"note"},Object(r.b)("p",null," If you have to use a context consider using ",Object(r.b)("inlineCode",{parentName:"p"},"CKComponentContext")," instead of ",Object(r.b)("inlineCode",{parentName:"p"},"CKComponentMutableContext")," as the latter will prevent component reuse for the subtree in which it was accessed.")))}s.isMDXComponent=!0},205:function(e,t,n){"use strict";n.d(t,"a",(function(){return b})),n.d(t,"b",(function(){return d}));var o=n(0),a=n.n(o);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,o,a=function(e,t){if(null==e)return{};var n,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)n=r[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var p=a.a.createContext({}),s=function(e){var t=a.a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i({},t,{},e)),n},b=function(e){var t=s(e.components);return a.a.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.a.createElement(a.a.Fragment,{},t)}},m=Object(o.forwardRef)((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,c=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),b=s(n),m=o,d=b["".concat(c,".").concat(m)]||b[m]||u[m]||r;return n?a.a.createElement(d,i({ref:t},p,{components:n})):a.a.createElement(d,i({ref:t},p))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,c=new Array(r);c[0]=m;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var p=2;p<r;p++)c[p]=n[p];return a.a.createElement.apply(null,c)}return a.a.createElement.apply(null,n)}m.displayName="MDXCreateElement"}}]);