<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.55">
<link rel="search" type="application/opensearchdescription+xml" title="ComponentKit" href="/opensearch.xml"><title data-react-helmet="true">Change Animations | ComponentKit</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Change Animations | ComponentKit"><meta data-react-helmet="true" name="description" content="To animate a change in a component, two conditions must be met:"><meta data-react-helmet="true" property="og:description" content="To animate a change in a component, two conditions must be met:"><meta data-react-helmet="true" property="og:url" content="https://componentkit.org/docs/animations-change"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://componentkit.org/docs/animations-change"><link rel="stylesheet" href="/styles.223d530e.css">
<link rel="preload" href="/styles.8b1fe755.js" as="script">
<link rel="preload" href="/runtime~main.db6336fa.js" as="script">
<link rel="preload" href="/main.68c4e743.js" as="script">
<link rel="preload" href="/1.c15b0c49.js" as="script">
<link rel="preload" href="/2.ef7cdf08.js" as="script">
<link rel="preload" href="/1be78505.5db1425d.js" as="script">
<link rel="preload" href="/51.1618a613.js" as="script">
<link rel="preload" href="/20ac7829.a1bfe5fc.js" as="script">
<link rel="preload" href="/5f35bdaf.813eedf6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ck_logo.png" alt="ComponentKit Logo"><strong class="navbar__title">ComponentKit</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a target="_blank" rel="noopener noreferrer" href="/appledoc/html/index.html" class="navbar__item navbar__link">API</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/componentkit" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ck_logo.png" alt="ComponentKit Logo"><strong class="navbar__title">ComponentKit</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="/appledoc/html/index.html" class="menu__link">API</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/componentkit" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/philosophy">Philosophy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/uses">Uses</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-api">Component API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/composite-components">Composite Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/views">Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/responder-chain">Responder Chain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/state">State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/scopes">Scopes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-controllers">Component Controllers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/lifecycle-methods">Lifecycle Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/debugging">Debugging</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Animations</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations-general-principles">General Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations-initial-and-final">Initial / Final Animations</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/animations-change">Change Animations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations-legacy-apis">Legacy APIs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Collection Views</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-changeset-api">Changeset API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-gotchas">Gotchas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-dive-deeper">Dive Deeper</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/never-subclass-components">Never Subclass Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-overrides">Avoid Overrides</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/indentation">Indentation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-local-variables">Avoid Local Variables, Use Const</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-single-use-constants">Avoid Single Use Constants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/no-underscores">No Underscores</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pass-in-actions">Pass in Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/no-side-effects">No Side Effects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pass-in-immutable-objects">Pass in Immutable Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components-cant-be-delegates">Components Can&#x27;t Be Delegates Directly</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-excessive-branching">Avoid Excessive Branching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/check-for-nil">Check for Nil</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-push-back">Avoid push_back</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/under-300-lines">Under 300 Lines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-width-100-percent">Avoid Width 100%</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/use-designated-initializer-style">Use Designated Initializer Style</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/break-out-composites">Break Out Composite Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/keep-controller-in-component">Keep Controller in Component</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Infrastructure</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-hosting-view">Component Hosting View</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/why-cpp">Why C++</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced-views">Advanced Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-context">Component Context</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Change Animations</h1></header><div class="markdown"><p>To animate a change in a component, two conditions must be met:</p><ul><li><p>it needs to have a view or eventually render to a view</p></li><li><p>it needs to declare a scope so the infra is able to find the same logical component in both previous and current tree</p></li></ul><p>The actual animation should be constructed and returned in the <code>animationsFromPreviousComponent:</code> method in the form of a <code>CKComponentAnimation</code> instance. In the vast majority of cases, <code>CKComponentAnimation</code> is created from a component / animation pair.</p><p>Let&#x27;s see how this all applies in practice. Consider a component that changes it&#x27;s background colour depending on one of its props:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-objectivec codeBlock_1wn8" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instancetype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">newWithActive</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">isActive</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  CKComponentScope </span><span class="token function" style="color:#d73a49">scope</span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">super</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">   newWithView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIView class</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">     </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">@selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">setBackgroundColor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isActive </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> UIColor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">green </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UIColor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">gray</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">   size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><p>Note, that the background colour is set as a part of the view configuration. Now, to change the background colour in an animated fashion, we need to provide an implementation for <code>animationFromPreviousComponent:</code>:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-objectivec codeBlock_1wn8" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">CKComponentAnimation</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">animationsFromPreviousComponent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CKComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">previousComponent</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">self</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Animation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">backgroundColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><p>and that&#x27;s pretty much it. Note that we didn&#x27;t have to specify the <code>from</code> and <code>to</code> animation values at all, since both are inferred from the view configuration.</p><video autoplay="" class="video" loop=""><source type="video/mp4" src="/assets/animations-example-4.mp4"><p>Your browser does not support the video element.</p></video><p>Another (somewhat obvious) observation here is that, if you want to animate a change in a child component, not <code>self</code>, you need to store a reference to the animated component in an ivar on the parent component. Here&#x27;s an example:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-objectivec codeBlock_1wn8" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">@implementation</span><span class="token plain"> Example </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  CKComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_greenBox</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instancetype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">newWithTrailing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">isTrailing</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> greenBox </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKComponent</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    newWithView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIView class</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">@selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">setBackgroundColor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> UIColor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">greenColor</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">super</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    newWithComponent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKFlexboxComponent</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      newWithView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">direction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CKFlexboxDirectionRow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">justifyContent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> isTrailing </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> CKFlexboxJustifyContentEnd </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CKFlexboxJustifyContentStart</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      children</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">greenBox</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  c</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">_greenBox </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> greenBox</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><p>This component lays out it&#x27;s only child component (a green box) either in a leading or in a trailing horizontal position depending on the <code>isTrailing</code> prop. In order to animate this change in the position of the green box we also need <code>animationsFromPreviousComponent:</code> implementation:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-objectivec codeBlock_1wn8" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">CKComponentAnimation</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">animationsFromPreviousComponent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CKComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">previousComponent</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">_greenBox</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Animation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">position</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">easeOut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><video autoplay="" class="video" loop=""><source type="video/mp4" src="/assets/animations-example-5.mp4"><p>Your browser does not support the video element.</p></video><p>Here, we used the stored reference to the child component to initialise the returned instance of <code>CKComponentAnimation</code>. Most importantly, we didn&#x27;t need to explicitly specify <code>from</code> and <code>to</code> values again because both will be inferred again, this time not from the view configuration specifically but from the <code>bounds</code> and <code>center</code> properties that are set at mount time.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="conditional-animations"></a>Conditional Animations<a aria-hidden="true" tabindex="-1" class="hash-link" href="#conditional-animations" title="Direct link to heading">#</a></h3><p>What if we put both these examples together and allow for changes in both background colour and position by passing both flags in props:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-objectivec codeBlock_1wn8" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">@implementation</span><span class="token plain"> Example </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  CKComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_box</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instancetype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">newWithActive</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">isActive trailing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">isTrailing</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> box </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKComponent</span></div><div class="token-line" style="color:#393A34"><span class="token plain">    newWithView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">UIView class</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token keyword" style="color:#00009f">@selector</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">setBackgroundColor</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> isActive </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> UIColor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">greenColor </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> UIColor</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">grayColor</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> c </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword" style="color:#00009f">super</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    newWithComponent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">CKFlexboxComponent</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      newWithView</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      size</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      style</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">direction </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CKFlexboxDirectionRow</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">justifyContent </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> isTrailing </span><span class="token operator" style="color:#393A34">?</span><span class="token plain"> CKFlexboxJustifyContentEnd </span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> CKFlexboxJustifyContentStart</span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      children</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">box</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  c</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">_box </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> box</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><p>You can combine animations for both properties using <code>parallel()</code> combinator like this:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-objectivec codeBlock_1wn8" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">CKComponentAnimation</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">animationsFromPreviousComponent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CKComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">previousComponent</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">_greenBox</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Animation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">parallel</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Animation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">position</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">easeOut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Animation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">backgroundColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><video autoplay="" class="video" loop=""><source type="video/mp4" src="/assets/animations-example-6.mp4"><p>Your browser does not support the video element.</p></video><p>However, if only one of the flags (<code>isActive</code> or <code>isTrailing</code>) changed as a result of a state update, there is no need to animate the other property. It won&#x27;t have any visual effect in this case but still puts additional load on the infra. The component tree may also be regenerated for other reasons, such as state updates in other components, so the animations should be conditional. This leads us to a conclusion that, in most cases, there has to be something in the state or props that will tell you if animation is needed. The relevant information needs to be saved as an ivar and used in <code>animationsFromPreviousComponent:</code> like this:</p><div class="mdxCodeBlock_iHAB"><pre class="prism-code language-objectivec codeBlock_1wn8" style="color:#393A34"><div class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">@implementation</span><span class="token plain"> Example </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  CKComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token plain">_box</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  BOOL _isActive</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  BOOL _isTrailing</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">instancetype</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">newWithActive</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">isActive trailing</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">BOOL</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">isTrailing</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  c</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">_box </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> box</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  c</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">_isActive </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> isActive</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  c</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">_isTrailing </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> isTrailing</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> c</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">-</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">std</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">CKComponentAnimation</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">animationsFromPreviousComponent</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">CKComponent </span><span class="token operator" style="color:#393A34">*</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain">previousComponent</span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> prev </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> CK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">objCForceCast</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">Example</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">previousComponent</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">auto</span><span class="token plain"> animations </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> std</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">vector</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">CKComponentAnimation</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prev</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">_isActive </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> _isActive</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    animations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push_back</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">_box</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Animation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">backgroundColor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">prev</span><span class="token operator" style="color:#393A34">-&gt;</span><span class="token plain">_isTrailing </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> isTrailing</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">    animations</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">push_back</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">_box</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> CK</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain">Animation</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">:</span><span class="token function" style="color:#d73a49">position</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">easeOut</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> animations</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></div><div class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></div></pre></div><video autoplay="" class="video" loop=""><source type="video/mp4" src="/assets/animations-example-7.mp4"><p>Your browser does not support the video element.</p></video><div class="note"><p>In order to animate a change you just need to set the proper values in the view configuration or alter the layout, and return one or more animations for the corresponding properties from <code>animationsFromPreviousComponent:</code> without specifying initial and final values. Make sure to return only animations for properties that have actually changed.</p></div></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/animations-initial-and-final"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Initial / Final Animations</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/animations-legacy-apis"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Legacy APIs »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#conditional-animations" class="table-of-contents__link">Conditional Animations</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"></div><div>Copyright © 2020 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.8b1fe755.js"></script>
<script src="/runtime~main.db6336fa.js"></script>
<script src="/main.68c4e743.js"></script>
<script src="/1.c15b0c49.js"></script>
<script src="/2.ef7cdf08.js"></script>
<script src="/1be78505.5db1425d.js"></script>
<script src="/51.1618a613.js"></script>
<script src="/20ac7829.a1bfe5fc.js"></script>
<script src="/5f35bdaf.813eedf6.js"></script>
</body>
</html>