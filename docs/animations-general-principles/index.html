<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.55">
<link rel="search" type="application/opensearchdescription+xml" title="ComponentKit" href="/opensearch.xml"><title data-react-helmet="true">General Principles | ComponentKit</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="General Principles | ComponentKit"><meta data-react-helmet="true" name="description" content="Just like building UIs with ComponentKit might require a slightly different way of thinking compared to traditional iOS UI frameworks, the same principle applies to animations."><meta data-react-helmet="true" property="og:description" content="Just like building UIs with ComponentKit might require a slightly different way of thinking compared to traditional iOS UI frameworks, the same principle applies to animations."><meta data-react-helmet="true" property="og:url" content="https://componentkit.org/docs/animations-general-principles"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://componentkit.org/docs/animations-general-principles"><link rel="stylesheet" href="/styles.223d530e.css">
<link rel="preload" href="/styles.c02dc00a.js" as="script">
<link rel="preload" href="/runtime~main.1177b324.js" as="script">
<link rel="preload" href="/main.7c3bd812.js" as="script">
<link rel="preload" href="/1.6f302099.js" as="script">
<link rel="preload" href="/2.639768cc.js" as="script">
<link rel="preload" href="/1be78505.60771322.js" as="script">
<link rel="preload" href="/53.2ad1721d.js" as="script">
<link rel="preload" href="/20ac7829.f72b063d.js" as="script">
<link rel="preload" href="/3cf29bca.4fd80c9d.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script>
<div style="display: none; text-align: center; background-color: white; color: black;" id="internaldocs-banner"></div><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ck_logo.png" alt="ComponentKit Logo"><strong class="navbar__title">ComponentKit</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a target="_blank" rel="noopener noreferrer" href="/appledoc/html/index.html" class="navbar__item navbar__link">API</a><a target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/componentkit" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input search-bar"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/ck_logo.png" alt="ComponentKit Logo"><strong class="navbar__title">ComponentKit</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Docs</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="/appledoc/html/index.html" class="menu__link">API</a></li><li class="menu__list-item"><a target="_blank" rel="noopener noreferrer" href="https://github.com/facebook/componentkit" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Getting Started</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/getting-started">Getting Started</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/philosophy">Philosophy</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/uses">Uses</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Reference</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-api">Component API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/composite-components">Composite Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/views">Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/responder-chain">Responder Chain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/actions">Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/state">State</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/scopes">Scopes</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-controllers">Component Controllers</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/lifecycle-methods">Lifecycle Methods</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/debugging">Debugging</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Animations</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/docs/animations-general-principles">General Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations-initial-and-final">Initial / Final Animations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations-change">Change Animations</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/docs/animations-legacy-apis">Legacy APIs</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Collection Views</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-overview">Overview</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-basics">Basics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-changeset-api">Changeset API</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-gotchas">Gotchas</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/datasource-dive-deeper">Dive Deeper</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Best Practices</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/never-subclass-components">Never Subclass Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-overrides">Avoid Overrides</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/indentation">Indentation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-local-variables">Avoid Local Variables, Use Const</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-single-use-constants">Avoid Single Use Constants</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/no-underscores">No Underscores</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pass-in-actions">Pass in Actions</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/no-side-effects">No Side Effects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/pass-in-immutable-objects">Pass in Immutable Objects</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/components-cant-be-delegates">Components Can&#x27;t Be Delegates Directly</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-excessive-branching">Avoid Excessive Branching</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/check-for-nil">Check for Nil</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-push-back">Avoid push_back</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/under-300-lines">Under 300 Lines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/avoid-width-100-percent">Avoid Width 100%</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/use-designated-initializer-style">Use Designated Initializer Style</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/break-out-composites">Break Out Composite Components</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/keep-controller-in-component">Keep Controller in Component</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Infrastructure</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-hosting-view">Component Hosting View</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Appendix</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/why-cpp">Why C++</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/advanced-views">Advanced Views</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/docs/component-context">Component Context</a></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">General Principles</h1></header><div class="markdown"><p>Just like building UIs with ComponentKit might require a slightly different way of thinking compared to traditional iOS UI frameworks, the same principle applies to animations.</p><p>Generally, all changes to your UI should be done via state or props updates instead of mutating view attributes directly. Similarly, animations in ComponentKit are only triggered by regenerating a component tree, so there has to be a state or props update. You should avoid reaching out to a component view and applying animations to it or its layer directly because component views are managed by CK infra and your changes are not guaranteed to be preserved. In addition to that, you risk introducing inconsistencies between animation values and the current values of the animated properties which will result in &quot;jumps&quot; and other visual artefacts.</p><p>In the majority of the cases, you should be doing one of three things below:</p><ul><li><p>animate from a given value to the value specified in the view configuration</p></li><li><p>animate from the value specified in the view configuration to a given value</p></li><li><p>animate between values specified in the view configurations of a different generations of a given component</p></li></ul><p>On the code level this translates to you specifying either:</p><ul><li><p>the initial value for an animated property (often referred to as <code>from</code> value)</p></li><li><p>the final value for an animated property (<code>to</code> value)</p></li><li><p>no values at all, since they will be inferred from the view configuration</p></li></ul><p>Specifying both initial and final values is usually a sign that you&#x27;re doing more work than necessary or even introducing a bug.</p><p>Another way to think about this is that only view configuration is permanent and animation values are temporary. A common mistake is to make animation values &quot;permanent&quot; by using a <code>forwards</code> fill mode and setting <code>removedOnCompletion</code> property to <code>false</code>, which causes animated values to override the values in the model layer. In addition to writing more code, this also increases the load on the render server process by keeping these animations around thus affecting performance. In the vast majority of the cases this wouldn&#x27;t be an issue if you make sure to have the right values in the view configuration.</p><p>The rest of this document will demonstrate how to apply these principles when writing animation code for your components.</p></div></article><div class="margin-vert--lg"><nav class="pagination-nav"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/debugging"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Debugging</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/animations-initial-and-final"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Initial / Final Animations »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="text--center"><div class="margin-bottom--sm"><img class="footer__logo" alt="Facebook Open Source Logo" src="https://docusaurus.io/img/oss_logo.png"></div><div>Copyright © 2020 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.c02dc00a.js"></script>
<script src="/runtime~main.1177b324.js"></script>
<script src="/main.7c3bd812.js"></script>
<script src="/1.6f302099.js"></script>
<script src="/2.639768cc.js"></script>
<script src="/1be78505.60771322.js"></script>
<script src="/53.2ad1721d.js"></script>
<script src="/20ac7829.f72b063d.js"></script>
<script src="/3cf29bca.4fd80c9d.js"></script>
</body>
</html>